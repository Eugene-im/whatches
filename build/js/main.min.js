"use strict";jQuery(document).ready((function(e){var a;function t(){e(".downloadPDF").click((function(a){a.preventDefault();var t=e(this).data("pdf"),s=e(this).data("pdf-title"),n=e("input[name='downloadPdf_field']").val();e.ajax({type:"POST",data:{pdf_link:t,pdf_title:s,nonce:n,action:"download_pdf"},url:js_variables.ajaxurl,xhrFields:{responseType:"blob"},success:function(e,a,t){var n=t.getResponseHeader("Content-Disposition"),r=/"([^"]*)"/.exec(n),o=null!=r&&r[1]?r[1]:s+".pdf";if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,o);else{var c=URL.createObjectURL(e),l=document.createElement("a");l.href=c,l.download=o,l.click(),URL.revokeObjectURL(c)}}})}))}function s(){var a=e("#file-name").val();e.ajax({type:"GET",url:"https://portfolio.qarea.com/wp-json/pdf/1.0/pdf-name-check",data:{pdf_name:a},success:function(a){e(".qa-choose-file-name").hasClass("error")&&e(".qa-choose-file-name").removeClass("error"),e(".name-check.error").length&&e(".name-check.error").remove(),e(".qa-gen-btn.submit").removeAttr("disabled"),e(".qa-gen-btn.submit").hasClass("disabled")&&e(".qa-gen-btn.submit").removeClass("disabled")},error:function(a){e(".qa-choose-file-name").hasClass("error")||e(".qa-choose-file-name").addClass("error"),e(".name-check.error").length||e(".qa-choose-file-name").append('<span class="name-check error">'+a.responseJSON.message+"</span>"),e(".qa-gen-btn.submit").attr("disabled","disabled"),e(".qa-gen-btn.submit").hasClass("disabled")||e(".qa-gen-btn.submit").addClass("disabled")}})}function n(){e(".action-remove").click((function(a){a.preventDefault();var t=e(this).data("pdfid"),s=e("#usr").val(),n=e('input[name="delete_pdf"]').val(),r={pdf_id:t,user_initiator:s};e.ajax({type:"POST",data:{data:r,nonce:n,action:"delete_pdf"},url:js_variables.ajaxurl,success:function(a){console.log(a.data.message),e(".qa-brand-tr").find('a[data-pdfid="'+a.data.id+'"]').parent().parent().addClass("removed")},error:function(e){console.log(e.responseJSON.data.message)}})}))}function r(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e('input[name="brand"]:checked').val(),s=[],n=[],r=[],c=[],l=e('input[name="get_projectsList"]').val();e("input[name='case_industries[]']:checked").each((function(){s.push(e(this).val())})),e("input[name='case_languages[]']:checked").each((function(){n.push(e(this).val())})),e("input[name='case_platforms[]']:checked").each((function(){r.push(e(this).val())})),e("input[name='countries[]']:checked").each((function(){c.push(e(this).val())})),0===s.length&&(s=["all"]),0===n.length&&(n=["all"]),0===r.length&&(r=["all"]),0===c.length&&(c=["all"]);var i=e('input[name="selected__portfolio[]"]').val(),d={brand:t,taxonomy_filters:{industry:s,technologies:n,services:r,countries:c},selected:i,search:a};e.ajax({type:"POST",data:{data:d,nonce:l,action:"get_projects_list"},url:js_variables.ajaxurl,beforeSend:function(){e("#projectsList").html("Loading...")},success:function(a){e("#projectsList").html(a),o()}})}function o(){e('input[name="portfolio[]"]').click((function(){if(e(this).hasClass("all-checkbox")){var a=e('input[name="portfolio[]"]');e(this).is(":checked")?(a.prop("checked",!0),e.each(a,(function(){c(e(this).attr("data-projectTitle"),e(this).attr("name").slice(0,-2),!0)}))):(a.prop("checked",!1),e.each(a,(function(){c(e(this).attr("data-projectTitle"),e(this).attr("name").slice(0,-2),!1)})))}else{c(e(this).attr("data-projectTitle"),e(this).attr("name").slice(0,-2),e(this).is(":checked"))}}))}function c(a,t,s){var n=e('input[name="selected__portfolio[]"]').val();if((n=JSON.parse(n||"[]"))||(n=[]),s)n.push(a);else{var r=n.indexOf(a);-1!==r&&n.splice(r,1)}e('input[name="selected__portfolio[]"]').val(JSON.stringify(n))}function l(){var a=e(".steps-content"),t=0;return e.each(a,(function(a,s){e(s).hasClass("active")&&(t=a)})),t}function i(a,t){"next"==t?(d(++a),function(a){return e("#manually").length>0&&1==a}(a)&&r(),function(a){return e("#filter").length>0&&5==a}(a)&&r()):"prev"==t&&0!==a&&d(--a)}function d(a){var t=e(".steps-content"),s=e(".steps-title");e.each(t,(function(t,s){t===a?e(s).addClass("active"):e(s).removeClass("active")})),e.each(s,(function(t,s){t===a?e(s).addClass("active"):e(s).removeClass("active")}))}function u(){return{sort:e("#sort-by-date").data("sort"),max_pages:e("#qa-portfolio-table").data("max-pages"),current_page:e("#qa-portfolio-table").data("current-page"),sortbrand:e("#sort-by-brand").data("brand"),searchTitle:e("#search-file-name").val(),searchAuthor:e("#search-author-name").val(),selectedIndustry:e("#select__case_industries").val(),selectedLanguage:e("#select__case_languages").val(),selectedPlatform:e("#select__case_platforms").val()}}function h(a,t,s){var n=e('input[name="selected__'+t+'[]"]').val();if((n=JSON.parse(n||"[]"))||(n=[]),s)n.push(a);else{var r=n.indexOf(a);-1!==r&&n.splice(r,1)}e('input[name="selected__'+t+'[]"]').val(JSON.stringify(n))}function p(){e(".qa-checkbox-toggle").click((function(){if(e(this).hasClass("all-checkbox")){var a=e(this).closest(".qa-industry-choose-block").find(".qa-checkbox-toggle");e(this).is(":checked")?(a.prop("checked",!0),e.each(a,(function(){h(e(this).val(),e(this).attr("name").slice(0,-2),!0)}))):(a.prop("checked",!1),e.each(a,(function(){h(e(this).val(),e(this).attr("name").slice(0,-2),!1)})))}else{h(e(this).val(),e(this).attr("name").slice(0,-2),e(this).is(":checked"))}}))}new WOW({mobile:!0}).init(),e("#select__sales").select2({dropdownCssClass:"custom"}),e("#select__delivery").select2({dropdownCssClass:"custom"}),t(),e("#file-name").on("keyup",(function(){clearTimeout(a),a=setTimeout(s,500)})),n(),e(".portfolio-form").submit((function(a){a.preventDefault();var t=e('input[name="brand"]:checked').val(),s=[];e("input[name='portfolio[]']:checked").each((function(){s.push(e(this).val())}));var n=e('input[name="portfolioForm_submission"]').val(),r=e('input[name="case_name"]').val(),o=e('select[name="sales"]').val(),c=e('select[name="delivery"]').val(),l={brand:t,projects:s,case_info:{case_name:r},sales:o,delivery:c};e.ajax({type:"POST",data:{form_data:l,nonce:n,action:"portfolioForm_submission"},url:js_variables.ajaxurl,beforeSend:function(){e("html").addClass("overflow-hidden"),e("body").append('<div class="loader"><img src="'+js_variables.site_url+'/wp-content/themes/portfolio/loader.gif"></div>')},success:function(e){window.open(e.data,"_blank").focus(),window.location.href=js_variables.site_url+"/pdfs"}})})),e('input[name="portfolio-search"]').on("keyup",(function(){r(e(this).val())})),e(".qa-gen-btn").click((function(){var a=l(),t=e(".steps-content").find(".qa-gen-options").eq(a);if(e(this).hasClass("required-check"))t.find('input[type="text"]').toArray().every((function(e){return""!==e.value}))?(i(a,"next"),e(".error-message").hide()):e(".error-message").show();else{var s=t.hasClass("required"),n=t.find('input[type="radio"]:checked, input[type="checkbox"]:checked').length>0;!s||n?(i(a,"next"),e(".error-message").hide()):e(".error-message").show()}e(this).hasClass("submit")&&(t.find('input[type="text"]').toArray().every((function(e){return""!==e.value}))?e(".error-message").hide():e(".error-message").show())})),e("#back-steps").click((function(a){var t=l();0==t?e("#back-steps").attr("href","/"):i(t,"prev")})),e("#select-all-features").click((function(){e('input[name="portfolio-features"]').prop("checked",this.checked)})),e(".qa-gen-steps-options .qa-choose-creator-name input,.qa-gen-steps-options .qa-choose-file-name input").on("input",(function(){e(this).val().length>0?e(this).addClass("has-text"):e(this).removeClass("has-text")})),e("#qa-gen-btn-more").click((function(a){a.preventDefault();var s=u();s.current_page<=s.max_pages?e.ajax({url:js_variables.ajaxurl,type:"POST",data:{action:"load_more_posts",data:s},success:function(a){e("#qa-portfolio-table").append(a.html),a.total_pages<=s.current_page?e("#qa-gen-btn-more").hide():e("#qa-portfolio-table").data("current-page",s.current_page+1),t(),n()}}):e("#qa-gen-btn-more").hide()})),e("#sort-by-date").click((function(){var a=u(),s="desc"===a.sort?"asc":"desc";e("#sort-by-date").data("sort",s),"desc"===s?e("#sort-by-date-status").text("last"):e("#sort-by-date-status").text("first"),a.sort=s,e.ajax({type:"POST",url:js_variables.ajaxurl,data:{action:"sort_table_data",data:a},success:function(a){e("#qa-portfolio-table").html(a.html),a.total_pages<=a.current_page?e("#qa-gen-btn-more").hide():e("#qa-gen-btn-more").show(),n(),t()}})})),e("#sort-by-brand").click((function(){var a=u();switch(a.sortbrand){case"all":a.sortbrand="qarea";break;case"qarea":a.sortbrand="testfort";break;case"testfort":a.sortbrand="all"}e("#sort-by-brand").data("brand",a.sortbrand),e.ajax({type:"POST",url:js_variables.ajaxurl,data:{action:"sort_table_brand",data:a},success:function(s){e("#qa-portfolio-table").html(s.html),e("#sort-by-brand-status").text(a.sortbrand),s.total_pages<=s.current_page?e("#qa-gen-btn-more").hide():e("#qa-gen-btn-more").show(),n(),t()}})})),e("#search-file-name").on("keyup",(function(){var a=u();e.ajax({type:"POST",url:js_variables.ajaxurl,data:{action:"search_file_name",data:a},success:function(a){e("#qa-portfolio-table").html(a.html),a.total_pages<=a.current_page?e("#qa-gen-btn-more").hide():e("#qa-gen-btn-more").show(),n(),t()}})})),e("#search-author-name").on("keyup",(function(){var a=u();e.ajax({type:"POST",url:js_variables.ajaxurl,data:{action:"search_author_name",data:a},success:function(a){e("#qa-portfolio-table").html(a.html),a.total_pages<=a.current_page?e("#qa-gen-btn-more").hide():e("#qa-gen-btn-more").show(),n(),t()}})})),e("#select__case_industries").on("change",(function(){var a={sort:u().sort,max_pages:u().max_pages,current_page:u().current_page,sortbrand:u().sortbrand,searchTitle:u().searchTitle,searchAuthor:u().searchAuthor,selectedIndustry:e("#select__case_industries").val(),selectedLanguage:e("#select__case_languages").val(),selectedPlatform:e("#select__case_platforms").val()};e.ajax({type:"POST",url:js_variables.ajaxurl,data:{action:"filter_cases",data:a},success:function(a){e("#qa-portfolio-table").html(a.html),a.total_pages<=a.current_page?e("#qa-gen-btn-more").hide():e("#qa-gen-btn-more").show()}})})),e("#select__case_platforms").on("change",(function(){var a={sort:u().sort,max_pages:u().max_pages,current_page:u().current_page,sortbrand:u().sortbrand,searchTitle:u().searchTitle,searchAuthor:u().searchAuthor,selectedIndustry:e("#select__case_industries").val(),selectedLanguage:e("#select__case_languages").val(),selectedPlatform:e("#select__case_platforms").val()};e.ajax({type:"POST",url:js_variables.ajaxurl,data:{action:"filter_cases",data:a},success:function(a){console.log(a),e("#qa-portfolio-table").html(a.html),a.total_pages<=a.current_page?e("#qa-gen-btn-more").hide():e("#qa-gen-btn-more").show()}})})),e("#select__case_languages").on("change",(function(){var a={sort:u().sort,max_pages:u().max_pages,current_page:u().current_page,sortbrand:u().sortbrand,searchTitle:u().searchTitle,searchAuthor:u().searchAuthor,selectedIndustry:e("#select__case_industries").val(),selectedLanguage:e("#select__case_languages").val(),selectedPlatform:e("#select__case_platforms").val()};e.ajax({type:"POST",url:js_variables.ajaxurl,data:{action:"filter_cases",data:a},success:function(a){console.log(a),e("#qa-portfolio-table").html(a.html),a.total_pages<=a.current_page?e("#qa-gen-btn-more").hide():e("#qa-gen-btn-more").show()}})})),p(),e(".qa-gen-options").each((function(){var a=e(this),t=a.find(".qa-choose-list");a.find(".search-taxonomy").on("keyup",(function(){var s=a.find(".qa-industry-choose-block").data("taxonomy"),n=a.find(".search-taxonomy").val(),r=a.find('input[name="selected__'+s+'[]"]').val();e.ajax({type:"POST",url:js_variables.ajaxurl,data:{action:"search_taxonomy",data:{slugTaxonomy:s,searchTaxonomy:n,selectedValues:r}},success:function(e){e.taxonomy===s&&(t.html(e.html),p())}})}))}))}));
//# sourceMappingURL=main.min.js.map
